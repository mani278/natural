/* Sample Natural ADABAS Program */

/* Define the map */
DEFINE DATA LOCAL
1 EMPLOYEE-VIEW VIEW OF EMPLOYEES
  2 PERSONNEL-ID
  2 NAME
  2 DEPARTMENT
1 #INPUT-MAP
  2 #PERSONNEL-ID (A8)
  2 #NAME (A20)
  2 #DEPARTMENT (A20)
END-DEFINE

/* Main Program */
DEFINE SUBROUTINE MAIN-PROGRAM
  /* Read data from the map */
  INPUT USING MAP 'EMPLOYEE-MAP'
  MOVE #PERSONNEL-ID TO EMPLOYEE-VIEW.PERSONNEL-ID
  MOVE #NAME TO EMPLOYEE-VIEW.NAME
  MOVE #DEPARTMENT TO EMPLOYEE-VIEW.DEPARTMENT

  /* Call subroutines */
  PERFORM CHECK-EMPLOYEE-ID
  PERFORM DISPLAY-EMPLOYEE-INFO

  /* Call a function */
  COMPUTE #EMPLOYEE-STATUS = GET-EMPLOYEE-STATUS(#PERSONNEL-ID)

  /* Display the status */
  WRITE 'Employee Status:' #EMPLOYEE-STATUS
END-SUBROUTINE

/* Subroutine to check employee ID */
DEFINE SUBROUTINE CHECK-EMPLOYEE-ID
  IF #PERSONNEL-ID = ' '
    WRITE 'Personnel ID is required.'
    STOP
  END-IF
END-SUBROUTINE

/* Subroutine to display employee information */
DEFINE SUBROUTINE DISPLAY-EMPLOYEE-INFO
  FIND EMPLOYEE-VIEW WITH PERSONNEL-ID = #PERSONNEL-ID
    DISPLAY NAME DEPARTMENT
  END-FIND
END-SUBROUTINE

/* Function to get employee status */
DEFINE SUBROUTINE GET-EMPLOYEE-STATUS
  RETURNS (A10)
  DEFINE DATA LOCAL
  1 #STATUS (A10)
  END-DEFINE

  /* Logic to determine employee status */
  IF #DEPARTMENT = 'HR'
    MOVE 'Active' TO #STATUS
  ELSE
    MOVE 'Inactive' TO #STATUS
  END-IF

  /* Return the status */
  RETURN #STATUS
END-SUBROUTINE

/* Start the main program */
PERFORM MAIN-PROGRAM

END
